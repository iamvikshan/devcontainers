# Example .gitpod.yml configurations for using the custom Gitpod DevContainer images

# Option 1: Using the Bun-only image (lightest)
# Uncomment the following lines to use:
#
# image:
#   file: .gitpod.Dockerfile
#
# Then create a .gitpod.Dockerfile with:
# FROM your-registry/gitpod-bun:latest

# Option 2: Using the Bun + Node.js image (most compatible)
# Uncomment the following lines to use:
#
# image:
#   file: .gitpod.Dockerfile
#
# Then create a .gitpod.Dockerfile with:
# FROM your-registry/gitpod-bun-node:latest

# Option 3: Using Ubuntu-based images (maximum control)
# Uncomment the following lines to use:
#
# image:
#   file: .gitpod.Dockerfile
#
# Then create a .gitpod.Dockerfile with:
# FROM your-registry/gitpod-ubuntu-bun:latest
# # or
# FROM your-registry/gitpod-ubuntu-bun-node:latest

# Common Gitpod tasks that work well with these images
tasks:
  - name: Install Dependencies
    init: |
      # For Bun projects
      bun install

      # For projects with both package managers
      # npm install  # or yarn install or pnpm install
    command: |
      echo "ðŸš€ Development environment ready!"
      echo "Available tools:"
      echo "â€¢ Bun: $(bun --version 2>/dev/null || echo 'Not available')"
      echo "â€¢ Node.js: $(node --version 2>/dev/null || echo 'Not available')"
      echo "â€¢ Shell: $SHELL"

  - name: Development Server
    command: |
      # Wait for dependencies to install
      gp await-port 3000

      # Start your development server
      # bun run dev
      # or npm run dev
      # or yarn dev

# Expose common development ports
ports:
  - port: 3000
    onOpen: open-preview
    name: Development Server
  - port: 5173
    onOpen: open-preview
    name: Vite Dev Server
  - port: 8080
    onOpen: open-preview
    name: Alternative Dev Server

# VS Code extensions that work well with these images
vscode:
  extensions:
    - oven.bun-vscode # Bun support
    - ms-vscode.vscode-typescript-next # TypeScript
    - esbenp.prettier-vscode # Prettier
    - ms-vscode.vscode-json # JSON support
    - bradlc.vscode-tailwindcss # Tailwind CSS
    - ms-vscode.vscode-eslint # ESLint

# GitHub integration (if using GitHub)
github:
  prebuilds:
    master: true
    branches: true
    pullRequests: true
    pullRequestsFromForks: false
